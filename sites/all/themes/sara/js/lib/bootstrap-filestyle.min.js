(function(e){var f=0;var g=function(a,b){this.options=b;this.$elementFilestyle=[];this.$element=e(a)};g.prototype={clear:function(){this.$element.val("");this.$elementFilestyle.find(":text").val("");this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle");this.$elementFilestyle.remove()},disabled:function(a){if(a===true){if(!this.options.disabled){this.$element.attr("disabled","true");this.$elementFilestyle.find("label").attr("disabled","true");this.options.disabled=true}}else{if(a===false){if(this.options.disabled){this.$element.removeAttr("disabled");this.$elementFilestyle.find("label").removeAttr("disabled");this.options.disabled=false}}else{return this.options.disabled}}},buttonBefore:function(a){if(a===true){if(!this.options.buttonBefore){this.options.buttonBefore=true;if(this.options.input){this.$elementFilestyle.remove();this.constructor();this.pushNameFiles()}}}else{if(a===false){if(this.options.buttonBefore){this.options.buttonBefore=false;if(this.options.input){this.$elementFilestyle.remove();this.constructor();this.pushNameFiles()}}}else{return this.options.buttonBefore}}},icon:function(a){if(a===true){if(!this.options.icon){this.options.icon=true;this.$elementFilestyle.find("label").prepend(this.htmlIcon())}}else{if(a===false){if(this.options.icon){this.options.icon=false;this.$elementFilestyle.find(".icon-span-filestyle").remove()}}else{return this.options.icon}}},input:function(a){if(a===true){if(!this.options.input){this.options.input=true;if(this.options.buttonBefore){this.$elementFilestyle.append(this.htmlInput())}else{this.$elementFilestyle.prepend(this.htmlInput())}this.$elementFilestyle.find(".badge").remove();this.pushNameFiles();this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn")}}else{if(a===false){if(this.options.input){this.options.input=false;this.$elementFilestyle.find(":text").remove();var b=this.pushNameFiles();if(b.length>0&&this.options.badge){this.$elementFilestyle.find("label").append(' <span class="badge">'+b.length+"</span>")}this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}else{return this.options.input}}},size:function(a){if(a!==undefined){var b=this.$elementFilestyle.find("label"),c=this.$elementFilestyle.find("input");b.removeClass("btn-lg btn-sm");c.removeClass("input-lg input-sm");if(a!="nr"){b.addClass("btn-"+a);c.addClass("input-"+a)}}else{return this.options.size}},placeholder:function(a){if(a!==undefined){this.options.placeholder=a;this.$elementFilestyle.find("input").attr("placeholder",a)}else{return this.options.placeholder}},buttonText:function(a){if(a!==undefined){this.options.buttonText=a;this.$elementFilestyle.find("label .buttonText").html(this.options.buttonText)}else{return this.options.buttonText}},buttonName:function(a){if(a!==undefined){this.options.buttonName=a;this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName})}else{return this.options.buttonName}},iconName:function(a){if(a!==undefined){this.$elementFilestyle.find(".icon-span-filestyle").attr({"class":"icon-span-filestyle "+this.options.iconName})}else{return this.options.iconName}},htmlIcon:function(){if(this.options.icon){return'<span class="icon-span-filestyle '+this.options.iconName+'"></span> '}else{return""}},htmlInput:function(){if(this.options.input){return'<input type="text" class="form-control '+(this.options.size=="nr"?"":"input-"+this.options.size)+'" placeholder="'+this.options.placeholder+'" disabled> '}else{return""}},pushNameFiles:function(){var a="",b=[];if(this.$element[0].files===undefined){b[0]={name:this.$element[0]&&this.$element[0].value}}else{b=this.$element[0].files}for(var c=0;c<b.length;c++){a+=b[c].name.split("\\").pop()+", "}if(a!==""){this.$elementFilestyle.find(":text").val(a.replace(/\, $/g,""))}else{this.$elementFilestyle.find(":text").val("")}return b},constructor:function(){var d=this,b="",l=d.$element.attr("id"),c=[],k="",a;if(l===""||!l){l="filestyle-"+f;d.$element.attr({id:l});f++}k='<span class="group-span-filestyle '+(d.options.input?"input-group-btn":"")+'"><label for="'+l+'" class="btn '+d.options.buttonName+" "+(d.options.size=="nr"?"":"btn-"+d.options.size)+'" '+(d.options.disabled?'disabled="true"':"")+">"+d.htmlIcon()+'<span class="buttonText">'+d.options.buttonText+"</span></label></span>";b=d.options.buttonBefore?k+d.htmlInput():d.htmlInput()+k;d.$elementFilestyle=e('<div class="bootstrap-filestyle input-group">'+b+"</div>");d.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(i){if(i.keyCode===13||i.charCode===32){d.$elementFilestyle.find("label").click();return false}});d.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(d.$elementFilestyle);if(d.options.disabled){d.$element.attr("disabled","true")}d.$element.change(function(){var i=d.pushNameFiles();if(d.options.input==false&&d.options.badge){if(d.$elementFilestyle.find(".badge").length==0){d.$elementFilestyle.find("label").append(' <span class="badge">'+i.length+"</span>")}else{if(i.length==0){d.$elementFilestyle.find(".badge").remove()}else{d.$elementFilestyle.find(".badge").html(i.length)}}}else{d.$elementFilestyle.find(".badge").remove()}});if(window.navigator.userAgent.search(/firefox/i)>-1){d.$elementFilestyle.find("label").click(function(){d.$element.click();return false})}}};var h=e.fn.filestyle;e.fn.filestyle=function(d,c){var b="",a=this.each(function(){if(e(this).attr("type")==="file"){var l=e(this),m=l.data("filestyle"),n=e.extend({},e.fn.filestyle.defaults,d,typeof d==="object"&&d);if(!m){l.data("filestyle",(m=new g(this,n)));m.constructor()}if(typeof d==="string"){b=m[d](c)}}});if(typeof b!==undefined){return b}else{return a}};e.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:true,badge:true,icon:true,buttonBefore:false,disabled:false,placeholder:""};e.fn.filestyle.noConflict=function(){e.fn.filestyle=h;return this};e(function(){e(".filestyle").each(function(){var a=e(this),b={input:a.attr("data-input")==="false"?false:true,icon:a.attr("data-icon")==="false"?false:true,buttonBefore:a.attr("data-buttonBefore")==="true"?true:false,disabled:a.attr("data-disabled")==="true"?true:false,size:a.attr("data-size"),buttonText:a.attr("data-buttonText"),buttonName:a.attr("data-buttonName"),iconName:a.attr("data-iconName"),badge:a.attr("data-badge")==="false"?false:true,placeholder:a.attr("data-placeholder")};a.filestyle(b)})})})(window.jQuery);