(function(x,C,k,b){var q=[],D=[],j=[],B=0,A=C.location.hash,w=false,m,z,v=x(C).scrollTop(),g=false,y={section:"section",sectionName:"section-name",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:true,axis:"y",target:"html,body",before:function(){},after:function(){}};x.scrollify=function(h){function d(a){if(D[a]){y.before(a,j);if(y.sectionName){C.location.hash=D[a]}x(y.target).stop().animate({scrollTop:q[a]},y.scrollSpeed,y.easing);x(y.target).promise().done(function(){y.after(a,j)})}}function i(a){x(y.section).each(function(l){if(l>0){q[l]=x(this).offset().top+y.offset}else{q[l]=x(this).offset().top}if(y.sectionName&&x(this).data(y.sectionName)){D[l]="#"+x(this).data(y.sectionName).replace(/ /g,"-")}else{D[l]="#"+(l+1)}j[l]=x(this);if(C.location.hash===D[l]){B=l;w=true}});if(true===a){d(B)}}var e={handleMousedown:function(){g=false},handleMouseup:function(){g=true},handleScroll:function(){if(m){clearTimeout(m)}m=setTimeout(function(){v=x(C).scrollTop();if(g===false){return false}g=false;var u=1,l=q.length,a=0,t=Math.abs(q[0]-v),p;for(;u<l;u++){p=Math.abs(q[u]-v);if(p<t){t=p;a=u}}B=a;d(a)},200)},wheelHandler:function(l,a){l.preventDefault();a=a||-l.originalEvent.detail/3||l.originalEvent.wheelDelta/120;clearTimeout(m);m=setTimeout(function(){if(a<0){if(B<q.length-1){B++}}else{if(a>0){if(B>0){B--}}}if(B>=0){d(B)}else{B=0}},50)},keyHandler:function(a){a.preventDefault();if(a.keyCode==38){if(B>0){B--}d(B)}else{if(a.keyCode==40){if(B<q.length-1){B++}d(B)}}},init:function(){if(y.scrollbars){x(C).bind("mousedown",e.handleMousedown);x(C).bind("mouseup",e.handleMouseup);x(C).bind("scroll",e.handleScroll)}else{x("body").css({overflow:"hidden"})}x(k).bind("DOMMouseScroll mousewheel",e.wheelHandler);x(k).bind("keyup",e.keyHandler)}};var c={touches:{touchstart:{y:-1},touchmove:{y:-1},touchend:false,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(l){var a;if(typeof l!=="undefined"){if(typeof l.touches!=="undefined"){a=l.touches[0];switch(l.type){case"touchstart":c.touches.touchstart.y=a.pageY;c.touches.touchmove.y=-1;c.options.timeStamp=(new Date).getTime();c.touches.touchend=false;case"touchmove":c.touches.touchmove.y=a.pageY;if(c.touches.touchstart.y!==c.touches.touchmove.y){l.preventDefault();if(c.options.timeStamp+c.options.timeGap<(new Date).getTime()&&c.touches.touchend==false){c.touches.touchend=true;if(c.touches.touchstart.y>-1){if(Math.abs(c.touches.touchmove.y-c.touches.touchstart.y)>c.options.distance){if(c.touches.touchstart.y<c.touches.touchmove.y){if(B>0){B--}d(B)}else{if(B<q.length-1){B++}d(B)}}}}}break;case"touchend":if(c.touches[l.type]===false){c.touches[l.type]=true;if(c.touches.touchstart.y>-1&&c.touches.touchmove.y>-1){if(Math.abs(c.touches.touchmove.y-c.touches.touchstart.y)>c.options.distance){if(c.touches.touchstart.y<c.touches.touchmove.y){if(B>0){B--}d(B)}else{if(B<q.length-1){B++}d(B)}}c.touches.touchstart.y=-1}}default:break}}}},init:function(){if(k.addEventListener){k.addEventListener("touchstart",c.touchHandler,false);k.addEventListener("touchmove",c.touchHandler,false);k.addEventListener("touchend",c.touchHandler,false)}}};if(typeof h==="string"){var f=D.length;for(;f>=0;f--){if(typeof arguments[1]==="string"){if(D[f]==arguments[1]){B=f;d(f)}}else{if(f===arguments[1]){B=f;d(f)}}}}else{y=x.extend(y,h);i(false);if(w===false&&y.sectionName){C.location.hash=D[0]}else{d(B)}e.init();c.init()}x(C).resize(function(){clearTimeout(z);z=setTimeout(function(){i(true)},50)})}})(jQuery,this,document);